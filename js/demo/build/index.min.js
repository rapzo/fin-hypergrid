!function e(t,n,o){function l(a,r){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!r&&c)return c(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var s=n[a]={exports:{}};t[a][0].call(s.exports,function(e){var n=t[a][1][e];return l(n?n:e)},s,s.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)l(o[a]);return l}({1:[function(e,t,n){"use strict";t.exports=function(e,t){var n=t.behavior.columnEnum,o=t.cellEditors.get("celleditor"),l=t.cellEditors.get("textfield"),i=l.extend("colorText",{template:'<input type="text" lang="{{locale}}" style="color:{{textColor}}">'});t.cellEditors.add(i);var a=l.extend("Time",{template:['<div class="hypergrid-textfield" style="text-align:right;">','    <input type="text" lang="{{locale}}" style="background-color:transparent; width:75%; text-align:right; border:0; padding:0; outline:0; font-size:inherit; font-weight:inherit;{{style}}">',"    <span>AM</span>","</div>"].join("\n"),initialize:function(){this.input=this.el.querySelector("input"),this.meridian=this.el.querySelector("span"),this.el.onclick=function(){this.meridian.textContent="AM"===this.meridian.textContent?"PM":"AM"}.bind(this),this.input.onclick=function(e){e.stopPropagation()},this.input.onfocus=function(e){var t=e.target;this.el.style.outline=this.outline=this.outline||window.getComputedStyle(t).outline,t.style.outline=0}.bind(this),this.input.onblur=function(e){this.el.style.outline=0}.bind(this)},setEditorValue:function(e){o.prototype.setEditorValue.call(this,e);var t=this.input.value.split(" ");this.input.value=t[0],this.meridian.textContent=t[1]},getEditorValue:function(t){return t=o.prototype.getEditorValue.call(this,t),"PM"===this.meridian.textContent&&(t+=e.NOON),t}});t.cellEditors.add(a);var r=[null,"textfield","textfield","textfield",null,"time","choice","choice","choice","textfield","textfield","textfield"];t.behavior.dataModel.getCellEditorAt=function(e,o,l,i){var a=l||r[e%r.length];switch(e){case n.birthState:i.textColor="red"}var c=t.cellEditors.create(a,i);if(c)switch(e){case n.employed:c=null;break;case n.totalNumberOfPetsOwned:c.input.setAttribute("min",0),c.input.setAttribute("max",10),c.input.setAttribute("step",.01)}return c}}},{}],2:[function(e,t,n){"use strict";t.exports=function(e,t){function n(e,t){var n=t.bounds.x,l=t.bounds.y,i=t.bounds.width,a=t.bounds.height,r=t.value,c=r.domain||t.domain||100,s=r.sizeFactor||t.sizeFactor||.65,d=r.darkenFactor||t.darkenFactor||.75,u=r.color||t.color||"gold",h=this.stroke=u===this.color?this.stroke:o(e,this.color=u,d),f=t.isSelected?r.fgSelColor||t.fgSelColor:r.fgColor||t.fgColor,g=r.shadowColor||t.shadowColor||"transparent",m=a/2,p=s*a,v=s*m,b=Number(r.val),w=this.points;if(!w){var y=3/7*v;w=this.points=[];for(var x=5,k=Math.PI/2,C=Math.PI/5;x;--x,k+=C)w.push({x:v*Math.cos(k),y:m-v*Math.sin(k)}),k+=C,w.push({x:y*Math.cos(k),y:m-y*Math.sin(k)});w.push(w[0])}e.cache.shadowColor="transparent",e.cache.lineJoin="round",e.beginPath();for(var E=5,S=n+5+v;E;--E,S+=p)w.forEach(function(t,n){e[n?"lineTo":"moveTo"](S+t.x,l+t.y)});e.closePath(),b=b/c*5,e.cache.fillStyle=u,e.save(),e.clip(),e.fillRect(n+5,l,(Math.floor(b)+.25+b%1*.5)*p,a),e.restore(),e.cache.strokeStyle=h,e.cache.lineWidth=1,e.stroke(),f&&"transparent"!==f&&(e.cache.fillStyle=f,e.cache.font="11px verdana",e.cache.textAlign="right",e.cache.textBaseline="middle",e.cache.shadowColor=g,e.cache.shadowOffsetX=e.cache.shadowOffsetY=1,e.fillText(b.toFixed(1),n+i+10,l+a/2))}function o(e,t,n){var o=l(e,t);return"rgba("+Math.round(n*o[0])+","+Math.round(n*o[1])+","+Math.round(n*o[2])+","+(o[3]||1)+")"}function l(e,t){e.cache.fillStyle=t;var n=t.match(a);if(n)n.shift(),n.forEach(function(e,t){n[t]=parseInt(e,16)});else{if(n=t.match(r),!n)throw"Unexpected format getting CanvasRenderingContext2D.fillStyle";n.shift()}return n}var i=t.behavior.columnEnum;t.behavior.dataModel.getCell=function(n,o){if(n.isUserDataArea){var l,a,r,c=n.dataCell.x,s=n.dataCell.y;switch(e.styleRowsFromData&&(l=t.behavior.getColumn(i.totalNumberOfPetsOwned).getValue(s),a=(155+10*(l%11)).toString(16),n.backgroundColor="#"+a+a+a),c){case i.lastName:n.color=null!=n.value&&"S"===(n.value+"")[0]?"red":"#191919",n.link=!0;break;case i.income:r=60;break;case i.travel:r=105}r&&(r+=Math.round(150*n.value/1e5),n.backgroundColor="#00"+r.toString(16)+"00",n.color="#FFFFFF"),c===i.totalNumberOfPetsOwned}return t.cellRenderers.get(o)};var a=/^#(..)(..)(..)$/,r=/^rgba\((\d+),(\d+),(\d+),\d+\)$/,c=t.cellRenderers.get("emptycell").constructor.extend({paint:n});return t.cellRenderers.add("Starry",c),t}},{}],3:[function(e,t,n){"use strict";t.exports=function(e,t){function n(){e.styleRowsFromData=!e.styleRowsFromData}function o(n){var o,r,s=document.createElement("div");s.className="ctrl-group",n.label&&(r=document.createElement("div"),r.className="twister",r.innerHTML=n.label,s.appendChild(r));var d=document.createElement("div");d.className="choices",s.appendChild(d),n.ctrls.forEach(function(c){if(c){var s,u=c.type||"checkbox",h="Property name: "+c.name;switch(c.tooltip&&(h+="\n\n"+c.tooltip),o=document.createElement("input"),o.type=u,o.id=c.name,o.name=n.label,u){case"text":o.value=c.value||l(c.name)||"",o.style.width="25px",o.style.marginLeft="4px",o.style.marginRight="4px",s=o;break;case"checkbox":case"radio":o.checked="checked"in c?c.checked:l(c.name),s=null}o.onchange=function(e){i.call(this,c.setter||a,e)},r=document.createElement("label"),r.title=h,r.appendChild(o),r.insertBefore(document.createTextNode(" "+(c.label||c.name)),s),d.appendChild(r),"treeview"===c.name&&(r.onmousedown=o.onmousedown=function(n){o.checked||t.behavior.dataModel.source.data===e.treeData||(alert('Load tree data first ("Set Data 3" button).'),n.preventDefault())})}}),c.appendChild(s)}function l(e){for(var n=e.split("."),o=t.properties;n.length;)o=o[n.shift()];return o}function i(e,t){if("radio"===this.type){var n=p[this.name];n&&n.handler.call(n.ctrl),p[this.name]={ctrl:this,handler:e}}e.call(this,t)}function a(){var e={},n=e,o=this.id;if("!"===o[0]){if("checkbox"!==this.type)throw"Expected inverse operator (!) on checkbox dashboard controls only but found on "+this.type+".";o=o.substr(1);var l=!0}for(var i=o.split(".");i.length>1;)n=n[i.shift()]={};switch(this.type){case"text":n[i.shift()]=this.value;break;case"checkbox":n[i.shift()]=l?!this.checked:this.checked}t.takeFocus(),t.addProperties(e),t.behaviorChanged(),t.repaint()}function r(){var e;t.selectionModel.clear(),t.behavior.dataModel.clearSelectedData(),a.call(this),this.checked&&("checkboxOnlyRowSelections"===this.id&&(e=document.getElementById("autoSelectRows")).checked?alert("Note that autoSelectRows is ineffectual when checkboxOnlyRowSelections is on."):"autoSelectRows"===this.id&&((e=document.getElementById("checkboxOnlyRowSelections")).checked&&confirm("Note that autoSelectRows is ineffectual when checkboxOnlyRowSelections is on.\n\nTurn off checkboxOnlyRowSelections?")&&(e.checked=!1,a.call(e)),(e=document.getElementById("singleRowSelectionMode")).checked&&confirm("Note that auto-selecting a range of rows by selecting a range of cells (with click + drag or shift + click) is not possible with singleRowSelectionMode is on.\n\nTurn off singleRowSelectionMode?")&&(e.checked=!1,a.call(e))))}var c=document.getElementById("ctrl-groups"),s=document.getElementById("dashboard"),d=document.getElementById("buttons");c.style.top=c.getBoundingClientRect().top+"px",s.style.display="none";var u=[{label:"Row styling",ctrls:[{name:"(Global setting)",label:"base on data",setter:n}]},{label:"Column header rows",ctrls:[{name:"showHeaderRow",label:"header"}]},{label:"Hover highlights",ctrls:[{name:"hoverCellHighlight.enabled",label:"cell"},{name:"hoverRowHighlight.enabled",label:"row"},{name:"hoverColumnHighlight.enabled",label:"column"}]},{label:"Link style",ctrls:[{name:"linkOnHover",label:"on hover"},{name:"linkColor",type:"text",label:"color"},{name:"linkColorOnHover",label:"color on hover"}]},{label:"Cell editing",ctrls:[{name:"editable"},{name:"editOnDoubleClick",label:"requires double-click"},{name:"editOnKeydown",label:"type to edit"}]},{label:"Selection",ctrls:[{name:"checkboxOnlyRowSelections",label:"by row handles only",setter:r,tooltip:"Note that when this property is active, autoSelectRows will not work."},{name:"singleRowSelectionMode",label:"one row at a time",setter:r},{name:"!multipleSelections",label:"one cell region at a time",setter:r,checked:!0},{name:"autoSelectRows",label:"auto-select rows",setter:r,tooltip:"Notes:\n1. Requires that checkboxOnlyRowSelections be set to false (so checking this box automatically unchecks that one).\n2. Set singleRowSelectionMode to false to allow auto-select of multiple rows."},{name:"autoSelectColumns",label:"auto-select columns",setter:r}]}];u.forEach(function(e){o(e)}),[{label:"Toggle Empty Data",onclick:e.toggleEmptyData},{label:"Set Data",onclick:function(){e.resetData()}},{label:"Set Data 1 (5000 rows)",onclick:function(){e.setData(people1)}},{label:"Set Data 2 (10000 rows)",onclick:function(){e.setData(people2)}},{label:"Reset Grid",onclick:e.reset}].forEach(function(e){var t=document.createElement("button");t.innerHTML=e.label,t.onclick=e.onclick,e.title&&(t.title=e.title),d.appendChild(t)}),e.resetDashboard=function(){u.forEach(function(e){e.ctrls.forEach(function(e){if(e)switch(e.setter){case r:case a:case void 0:switch(e.type){case"radio":case"checkbox":case void 0:var t=e.name,n="!"===t[0];document.getElementById(t).checked=l(t)^n}}})})},document.getElementById("tab-dashboard").addEventListener("click",function(e){"none"===s.style.display?(s.style.display="block",t.div.style.transition="margin-left .75s",t.div.style.marginLeft=Math.max(180,s.getBoundingClientRect().right+8)+"px"):(setTimeout(function(){s.style.display="none"},800),t.div.style.marginLeft="30px")});var h,f,g;document.getElementById("tab-fps").addEventListener("click",function(e){function n(){var e,n,l=t.canvas.currentFPS,i=Array(Math.round(l)+1).join("I");for(o.innerHTML="",o.appendChild(document.createElement("span")),n=document.createElement("span"),f&&(g+=l,n.innerHTML=l.toFixed(1),n.title=f+"-second average = "+(g/f).toFixed(1)),f+=1,o.appendChild(n);(e=i.substr(0,12)).length;)n=document.createElement("span"),n.innerHTML=e,o.appendChild(n),i=i.substr(12)}var o=this,l=o.style;(t.properties.enableContinuousRepaint^=!0)?(l.backgroundColor="#666",l.textAlign="left",f=g=0,n(),h=setInterval(n,1e3)):(clearInterval(h),l.backgroundColor=l.textAlign=null,o.innerHTML="FPS")});var m;document.getElementById("tab-grow-shrink").addEventListener("click",function(e){var n;m?(t.div.style.height=m,m=void 0,n="Grow"):(m=window.getComputedStyle(t.div).height,t.div.style.transition="height 1.5s linear",t.div.style.height=window.innerHeight+"px",n="Shrink"),this.innerHTML+=" ...",setTimeout(function(){this.innerHTML=n}.bind(this),1500)}),document.getElementById("dashboard").addEventListener("click",function(e){var n=e.target;n.classList.contains("twister")&&(n.nextElementSibling.style.display=n.classList.toggle("open")?"block":"none",t.div.style.marginLeft=Math.max(180,e.currentTarget.getBoundingClientRect().right+8)+"px")});var p={}}},{}],4:[function(e,t,n){"use strict";t.exports=function(e,t){function n(e){var n=e.detail,o=String.fromCharCode(n.key).toUpperCase(),l=!1;if(n.ctrl)if(n.shift)switch(o){case"0":t.stopEditing()&&t.selectToViewportCell(0,0);break;case"9":t.stopEditing()&&t.selectToFinalCell();break;case"8":t.stopEditing()&&t.selectToFinalCellOfCurrentRow();break;case"7":t.stopEditing()&&t.selectToFirstCellOfCurrentRow();break;default:l=!0}else switch(o){case"0":t.stopEditing()&&t.selectViewportCell(0,0);break;case"9":t.stopEditing()&&t.selectFinalCell();break;case"8":t.stopEditing()&&t.selectFinalCellOfCurrentRow();break;case"7":t.stopEditing()&&t.selectFirstCellOfCurrentRow();break;default:l=!0}return l}t.addEventListener("fin-click",function(t){var n=t.detail.gridCell;e.vent&&console.log("fin-click cell:",n)}),t.addEventListener("fin-double-click",function(t){var n=t.detail.dataRow;e.vent&&console.log("fin-double-click row-context:",n)}),t.addEventListener("fin-button-pressed",function(e){var t=e.detail;t.value=!t.value}),t.addEventListener("fin-scroll-x",function(t){e.vent&&console.log("fin-scroll-x ",t.detail.value)}),t.addEventListener("fin-scroll-y",function(t){e.vent&&console.log("fin-scroll-y",t.detail.value)}),t.addEventListener("fin-cell-enter",function(e){var n=e.detail;t.setAttribute("title",'event name: "fin-cell-enter"\ngridCell: { x: '+n.gridCell.x+", y: "+n.gridCell.y+" }\ndataCell: { x: "+n.dataCell.x+", y: "+n.dataCell.y+' }\nsubgrid type: "'+n.subgrid.type+'"\nsubgrid name: '+(n.subgrid.name?'"'+n.subgrid.name+'"':"undefined"))}),t.addEventListener("fin-set-totals-value",function(e){var n=e.detail,o=n.areas||["top","bottom"];o.forEach(function(e){var o="get"+e[0].toUpperCase()+e.substr(1)+"Totals",l=t.behavior.dataModel[o]();l[n.y][n.x]=n.value}),t.repaint()}),t.addEventListener("fin-filter-applied",function(t){e.vent&&console.log("fin-filter-applied",t)}),t.addEventListener("fin-keydown",n),t.addEventListener("fin-editor-keydown",function(e){}),t.addEventListener("fin-selection-changed",function(n){if(e.vent&&console.log("fin-selection-changed",t.getSelectedRows(),t.getSelectedColumns(),t.getSelections()),0===n.detail.selections.length)return void console.log("no selections")}),t.addEventListener("fin-row-selection-changed",function(n){var o=n.detail;e.vent&&console.log("fin-row-selection-changed",o);var l=o.rows,i=o.selections;if(t.properties.singleRowSelectionMode&&!t.properties.multipleSelections&&l.length&&i.length){var a=t.selectionModel.getLastSelection(),r=a.left,c=l[0],s=a.right-r,d=0,u=!1;t.selectionModel.select(r,c,s,d,u),t.repaint()}return 0===l.length?void console.log("no rows selected"):(console.log(t.getRowSelectionMatrix()),void console.log(t.getRowSelection()))}),t.addEventListener("fin-column-selection-changed",function(n){return e.vent&&console.log("fin-column-selection-changed",n.detail),0===n.detail.columns.length?void console.log("no rows selected"):(console.log(t.getColumnSelectionMatrix()),void console.log(t.getColumnSelection()))}),t.addEventListener("fin-editor-data-change",function(t){e.vent&&console.log("fin-editor-data-change",t.detail)}),t.addEventListener("fin-request-cell-edit",function(t){e.vent&&console.log("fin-request-cell-edit",t)}),t.addEventListener("fin-before-cell-edit",function(t){e.vent&&console.log("fin-before-cell-edit",t)}),t.addEventListener("fin-after-cell-edit",function(t){e.vent&&console.log("fin-after-cell-edit",t)}),t.addEventListener("fin-editor-keyup",function(t){e.vent&&console.log("fin-editor-keyup",t.detail)}),t.addEventListener("fin-editor-keypress",function(t){e.vent&&console.log("fin-editor-keypress",t.detail)}),t.addEventListener("fin-editor-keydown",function(t){e.vent&&console.log("fin-editor-keydown",t.detail)}),t.addEventListener("fin-groups-changed",function(t){e.vent&&console.log("fin-groups-changed",t.detail)}),t.addEventListener("fin-context-menu",function(t){var n=t.detail.gridCell;e.vent&&console.log("fin-context-menu("+n.x+", "+n.y+")")})}},{}],5:[function(e,t,n){"use strict";window.onload=function(){function t(e,t){t=e.length?t||{schema:a.lib.fields.getSchema(e)}:void 0,g.setData(e,t),m.reindex()}function n(){g.reset(),h(i,g)}function o(){w?(t(w.data,w.schema),m.setColumnIndexes(w.activeColumns),w=void 0):(w={data:p.getData(),schema:p.schema,activeColumns:m.getActiveColumns().map(function(e){return e.index})},t([]))}function l(){t(people1),v&&(u(i,g),v=!1),setTimeout(function(){r(i,g)},50)}var i=window.demo={vent:!1,reset:n,setData:t,toggleEmptyData:o,resetData:l},a=fin.Hypergrid,r=e("./setState"),c=e("./cellrenderers"),s=e("./formatters"),d=e("./cellEditors"),u=e("./dashboard"),h=e("./events");a.behaviors.JSON.prototype.columnEnumKey=a.behaviors.JSON.columnEnumDecorators.toCamelCase;var f={data:people1,margin:{bottom:"17px",right:"17px"},schema:a.lib.fields.getSchema(people1),state:{color:"orange"}},g=window.grid=window.g=new a("div#json-example",f),m=window.b=g.behavior,p=window.m=m.dataModel,v=!0,b=m.columnEnum;console.log("Fields:"),console.dir(m.dataModel.schema.map(function(e){return e.name})),console.log("Headers:"),console.dir(m.dataModel.schema.map(function(e){return e.header})),console.log("Indexes:"),console.dir(b);var w;l(),c(i,g),s(i,g),d(i,g),h(i,g)}},{"./cellEditors":1,"./cellrenderers":2,"./dashboard":3,"./events":4,"./formatters":6,"./setState":7}],6:[function(e,t,n){"use strict";t.exports=function(e,t){var n=/^\s*((((\d+)')?\s*((\d+)")?)|\d+)\s*$/,o={format:function(e){if(null!=e){var t=Math.floor(e/12);e=(t?t+"'":"")+" "+e%12+'"'}else e=null;return e},parse:function(e){var t,o,l=e.match(n);return l?(o=l[4],t=l[6],void 0===o&&void 0===t?t=Number(l[1]):(o=Number(o||0),t=Number(t||0),t=12*o+t)):t=0,t}};return t.localization.add("foot",o),t.localization.add("singdate",new t.localization.DateFormatter("zh-SG")),t.localization.add("pounds",new t.localization.NumberFormatter("en-US",{style:"currency",currency:"USD"})),t.localization.add("francs",new t.localization.NumberFormatter("fr-FR",{style:"currency",currency:"EUR"})),t.localization.add({name:"hhmm",format:function(t){var n=Math.floor(t/60)%12||12,o=(t%60+100+"").substr(1,2),l=t<e.NOON?"AM":"PM";return n+":"+o+" "+l},invalid:function(e){return!/^(0?[1-9]|1[0-2]):[0-5]\d$/.test(e)},parse:function(e){var t=e.match(/^(\d+):(\d{2})$/);return 60*Number(t[1])+Number(t[2])}}),t}},{}],7:[function(e,t,n){"use strict";t.exports=function(e,t){var n=t.behavior.columnEnum,o={columnIndexes:[n.lastName,n.totalNumberOfPetsOwned,n.height,n.birthDate,n.birthTime,n.birthState,n.employed,n.income,n.travel],noDataMessage:"No Data to Display",backgroundColor:"white",font:"normal small garamond",rowProperties:[void 0,void 0,void 0,{color:"#116611",backgroundColor:"#e8ffe8",font:"italic small garamond"},{color:"#116611",backgroundColor:"#e8ffe8",font:"italic small garamond"},{color:"#116611",backgroundColor:"#e8ffe8",font:"italic small garamond"}],fixedColumnCount:1,fixedRowCount:4,columnAutosizing:!1,headerTextWrapping:!0,halign:"left",renderFalsy:!0,scrollbarHoverOff:"visible",scrollbarHoverOver:"visible",columnHeaderBackgroundColor:"pink",checkboxOnlyRowSelections:!0,autoSelectRows:!0,rows:{header:{0:{height:40}}},calculators:{Add10:"function(dataRow,columnName) { return dataRow[columnName] + 10; }"},columns:{height:{halign:"right",format:"foot"},last_name:{columnHeaderBackgroundColor:"#142B6F",columnHeaderColor:"white",columnHeaderHalign:"left",rightIcon:"down-rectangle",link:!0},first_name:{},total_number_of_pets_owned:{halign:"center",format:"number",calculator:"Add10",color:"green"},birthDate:{format:"singdate",rightIcon:"calendar"},birthTime:{halign:"right",editor:"time",format:"hhmm"},birthState:{editor:"colortext",rightIcon:"down-rectangle"},residenceState:{rightIcon:"down-rectangle"},employed:{halign:"right",renderer:"button",backgroundColor:"white"},income:{halign:"right",format:"pounds"},travel:{halign:"right",format:"francs"}},cells:{data:{16:{height:{font:"10pt Tahoma",color:"lightblue",backgroundColor:"red",halign:"left",reapplyCellProperties:!0}}}}};t.setState(o),console.log("visible rows = "+t.renderer.visibleRows.map(function(e){return e.subgrid.type[0]+e.rowIndex})),console.log("visible columns = "+t.renderer.visibleColumns.map(function(e){return e.columnIndex})),t.takeFocus(),e.resetDashboard()}},{}]},{},[5]);